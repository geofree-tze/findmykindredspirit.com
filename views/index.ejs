<% include ../views/partials/header %>


<style>

/* https://css-tricks.com/snippets/css/css-box-shadow/ */
.shadow {
   -moz-box-shadow:    inset 0 0 10px #000000;
   -webkit-box-shadow: inset 0 0 10px #000000;
   box-shadow:         inset 0 0 10px #000000;
}

.shadow2 {
  -moz-box-shadow:    3px 3px 5px 6px #888;
  -webkit-box-shadow: 3px 3px 5px 6px #888;
  box-shadow:         3px 3px 5px 6px #888;
}

td {
  vertical-align: top;
}

table {
  margin-left: auto; 
  margin-right: auto;
}



/* https://codepen.io/aaroniker/pen/XxPNqY */
.bottom_left {
  position: fixed;
  display: block;
  left: 10px;
  bottom: 0px;
}

.iframe-container{
  position: relative;
  width: 100%;
  padding-bottom: 58.35%; 
  height: 0;
}
.iframe-container iframe{
  position: absolute;
  top:0;
  left: 0;
  width: 100%;
  height: 100%;
}


/* https://codepen.io/nohoid/pen/kIfto */
.wrapper { 
  height: 75px;
  width: 270px;
background: linear-gradient(124deg, #ff2400, #e81d1d, #e8b71d, #e3e81d, #1de840, #1ddde8, #2b1de8, #dd00f3, #dd00f3);
background-size: 1800% 1800%;

-webkit-animation: rainbow 18s ease infinite;
-z-animation: rainbow 18s ease infinite;
-o-animation: rainbow 18s ease infinite;
  animation: rainbow 18s ease infinite;}

@-webkit-keyframes rainbow {
    0%{background-position:0% 82%}
    50%{background-position:100% 19%}
    100%{background-position:0% 82%}
}
@-moz-keyframes rainbow {
    0%{background-position:0% 82%}
    50%{background-position:100% 19%}
    100%{background-position:0% 82%}
}
@-o-keyframes rainbow {
    0%{background-position:0% 82%}
    50%{background-position:100% 19%}
    100%{background-position:0% 82%}
}
@keyframes rainbow { 
    0%{background-position:0% 82%}
    50%{background-position:100% 19%}
    100%{background-position:0% 82%}
}
</style>

<script>
// https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_toggle_hide_show
function getStartedButtonClicked() {
    document.getElementById('start2').style.display = 'none';
    document.getElementById('myDIV').style.display = 'block';

    // https://stackoverflow.com/questions/49475935/on-button-click-focus-input-in-javascript/49475954
    document.getElementById('email').focus();
}
</script>

    </head>
    <body style="background-color:black;">
    


    <div class="container">
        <%- messages('message', locals) %>

		<br>
		<br>

	<div id="start2">
		<div style="text-align:center;">
			<span style="font-size:18px;color:white;">
				tinder for friends
			</span>

			<br>
			<br>

			<a href="about"><img width="100%" style="max-width:250px;" src="https://i.imgur.com/Bwe0vKx.gif" alt="internet globe"></a>

			<br>
			<br>

			<span style="font-size:12px;color:white;">
				find people you relate to
			</span>

			<br>
			<br>
			<br>

			<a href="about"><img width="67px" src="https://i.imgur.com/mLmudut.png" alt="da rules fairly odd parents"></a>
			<a href="about"><span style="font-size:12px;"><b>Click here to read the rules.</b></span></a>

			<br>
			<br>

			<div class="wrapper" style="display:inline-block;"><br>
			<div id="start" style="text-align:center;">
				<button onclick="getStartedButtonClicked()" class="btn btn-default btn-md">
				<span style="color:blue;font-weight:bold;">
					<i class="fas fa-play-circle"></i> Click here to play the game.
				</span>		
				</button>
			</div>
			</div>
		</div>
	</div>

	<br>










































	<div id="myDIV" style="display: none;">
	<form id="login" style="text-align:center;">

<br>
<br>
<br>
<br>
<br>

<table style="text-align:right;display:inline-block;">
<tr>
<td>
		<span style="color:white;">Step 1.&nbsp;&nbsp;</span>

		<br>
		<br>

</td>
<td>
		<span style="color:white;">enter your&nbsp;&nbsp;</span>
		<input type="email" name="email" id="email" placeholder="college email" maxlength="100" required="required" autofocus>

		<span id="not_a_college_email_message" style="display: none;color:red;font-weight:bold;">
			Sorry, your email didn't end in .edu<br><span style="font-size:10px;">or .edu.XX or .ac.XX</span>
		</span>

		<span id="not_a_college_email_message2" style="display:block;">
<!--			<a href="why-not-gmail" target="_blank">why not gmail?</a><br><br> -->
			<br><br>
		</span>
</td>
</tr>

<tr>
<td>
		<span style="color:white;">Step 2.&nbsp;&nbsp;</span>
</td>
<td>
		<div class="g-recaptcha" data-sitekey="6LdN2IMUAAAAANfZxaaec6_Lx_JOCD1mGhvHD1FF"></div>
		<div id="captcha_not_checked_message" style="display: none;color:red;font-weight:bold;">
			Bee-boo-boo-bop.<br><span style="font-size:10px;">(please confirm you're not a robot)</span>
		</div>
</td>
</tr>

<tr>
<td>
		<br>

		<span style="color:white;">Step 3.&nbsp;&nbsp;</span>
</td>
<td>
		<br>

		<span style="color:white;">click --&gt;</span>
		<input type="submit" value="Send Invite">

</td>
</tr>
</table>
	</form>
	</div>

<script>
    document.getElementById('login').addEventListener('submit', submitForm);
    function submitForm(e){
        e.preventDefault();

        const email = document.querySelector('#email').value;
        const captcha = document.querySelector('#g-recaptcha-response').value;



    // https://stackoverflow.com/questions/8885052/regular-expression-to-validate-email-ending-in-edu
    // https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_regexp_test2
    // .edu
    var patt = new RegExp("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.+-]+\.edu$");
    // .edu.XX
    var patt2 = new RegExp("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.+-]+\.edu\.[a-zA-Z0-9.+-]+$");
    // .ac.XX
    var patt3 = new RegExp("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.+-]+\.ac\.[a-zA-Z0-9.+-]+$");


    if (!(patt.test(email) || (patt2.test(email) || patt3.test(email)))) {
	document.getElementById('not_a_college_email_message').style.display = 'block';
	document.getElementById('not_a_college_email_message2').style.display = 'none';
	document.getElementById('email').value = '';
	document.getElementById('email').placeholder= 'email@college.edu';
	document.getElementById('captcha_not_checked_message').style.display = 'none';
    }

    else if (!(grecaptcha && grecaptcha.getResponse().length !== 0)) {
	document.getElementById('not_a_college_email_message').style.display = 'none';
	document.getElementById('not_a_college_email_message2').style.display = 'block';
	document.getElementById('captcha_not_checked_message').style.display = 'block';
    }

    else {
      
        fetch('/send-invite', {
            method:'POST',
            headers: {
                'Accept': 'application/json, text/plain, */*',
                'Content-type':'application/json'
            },
//            body:JSON.stringify({email: email})
            body:JSON.stringify({email: email, captcha: captcha})
        })
        .then((res) => res.json())
        .then((data) => {
            if (data.success == true) {
		document.location.replace('https://<%= domainName %>/invite-sent');
	    } else {
		document.location.replace('https://<%= domainName %>/');
	    }
        });
    }
    }
</script>



</div>
<script   src="https://code.jquery.com/jquery-1.12.4.js"   integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="   crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</body>
</html>
