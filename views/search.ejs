<% include ../views/partials/header %>

    </head>
    <body style="background-color:white;">          

<% include ../views/partials/header2 %>




	<div class="row">
	<div class="col-md-12">
            <div class="well" style="background-color:#dddddd;margin-left:0px;margin-right:0px;">
            <form class="form-inline" method="POST" action="/search/query">
                <div class="row">

		<% if (query) { %>

                    <div class="col-xs-1"></div>

                    <div class="col-xs-6" style="text-align:right;">
			<input type="hidden" name="statementQuery" value="">
                    </div>

                    <div class="col-xs-1"></div>

                    <div class="col-xs-4" style="text-align:left;">
			<button type="submit" class="btn btn-warning" style="background-color:#ebb700;">
                            <span style="font-size:11px;font-family:Helvetica;font-weight:bold;color:#e5e5e5;"><i class="fas fa-undo"></i> RESET</span>
			</button>
                    </div>

		<% } else { %>

                    <div class="col-xs-1"></div>

                    <div class="col-xs-6" style="text-align:right;">
                        <input type="text" name="statementQuery" placeholder=" search query" maxlength="100" autofocus>
                    </div>

                    <div class="col-xs-1"></div>

                    <div class="col-xs-4" style="text-align:left;">
			<button type="submit" class="btn btn-success" style="background-color:#44dd44;">
                            <span style="font-size:11px;font-family:Helvetica;font-weight:bold;color:#e5e5e5;"><i class="fas fa-search"></i> SEARCH</span>
			</button>
                    </div>

		<% } %>

                </div>
            </form>
            </div>
	</div>
	</div>






<div id="text-carousel" class="carousel" style="background-color:#ffffff;" data-interval="false">
    <!-- Wrapper for slides -->
    <div class="row">
        <div class="col-xs-offset-0 col-xs-12">
            <div class="carousel-inner" style="height:200px;">

<% if (query === "") { %>

<% } else if (tagsAll.length > 0) { %>



        	<% var k = 1; %>
                <% tagsAll.forEach(function(tag){ %>


		<%
			var userAlreadyAddedTag = false;
			if (tags.length > 0) {
				tags.forEach(function(userTag) {
					if (userTag.description == tag.description) {
						userAlreadyAddedTag = true;
					}
				})
			}
		%>

		<% if (!statementIndex && k == 1) { %>
                	<div class="item active">
		<% } else { %>
                	<div class="item <% if (statementIndex == tag.description) {%>active<%}%>">
		<% } %>
                    <div class="carousel-content">
                        <div style="margin-left:0px;">

        			<br>
        			<br>

				<%if (!userAlreadyAddedTag) { %>
					<form method="POST" class="form-inline" action="/search/add_tag"> <!-- https://stackoverflow.com/questions/37954005/keep-scroll-position-of-a-div-after-a-form-submit-using-session-var-or-css -->


					<div class="row">
						<div class="col-xs-2"></div>
						<div class="col-xs-6">
							<span style="font-size:14px;">
        							<%= k++ %> of <%= tagsAll.length %> quirks
		        			    	</span>
						</div>
						<div class="col-xs-4">
								<input type="checkbox" onChange="this.form.submit()">
						</div>
					</div>

					<br>

					<div class="row">
						<div class="col-xs-2"></div>
						<div class="col-xs-7">
							<input type="hidden" name="tag" value="<%= tag.description %>">

			        			<b><u><span style="font-family: 'Times New Roman', Times, serif;font-size:21px;word-wrap:break-word;display:inline-block;">
					<% if (query) { %>
						<%= tag.description.substring(0, tag.description.toLowerCase().indexOf(query.toLowerCase())) %><span style="background-color:yellow;"><%= tag.description.substring(tag.description.toLowerCase().indexOf(query.toLowerCase()), tag.description.toLowerCase().indexOf(query.toLowerCase())+query.length) %></span><%= tag.description.substring(tag.description.toLowerCase().indexOf(query.toLowerCase())+query.length, tag.description.length) %>
					<% } else { %>
	                			<%= tag.description %>
					<% } %>
							</span></u></b>
						</div>
					</div>



				
					</form>

				<% } else{ %>
					<form method="POST" class="form-inline" action="/search/remove_tag">

					<div class="row">
						<div class="col-xs-2"></div>
						<div class="col-xs-6">
							<span style="font-size:14px;">
        							<%= k++ %> of <%= tagsAll.length %> quirks
		        			    	</span>
						</div>
						<div class="col-xs-4">
								<input type="checkbox" onChange="this.form.submit()" checked>
						</div>
					</div>

					<br>

					<div class="row">
						<div class="col-xs-2"></div>
						<div class="col-xs-7">
							<input type="hidden" name="tag" value="<%= tag.description %>">

			        			<b><u><span style="font-family: 'Times New Roman', Times, serif;font-size:21px;word-wrap:break-word;display:inline-block;">
					<% if (query) { %>
						<%= tag.description.substring(0, tag.description.toLowerCase().indexOf(query.toLowerCase())) %><span style="background-color:yellow;"><%= tag.description.substring(tag.description.toLowerCase().indexOf(query.toLowerCase()), tag.description.toLowerCase().indexOf(query.toLowerCase())+query.length) %></span><%= tag.description.substring(tag.description.toLowerCase().indexOf(query.toLowerCase())+query.length, tag.description.length) %>
					<% } else { %>
	                			<%= tag.description %>
					<% } %>
							</span></u></b>
						</div>
					</div>

					</form>
		<% } %>

                        </div>
                    </div>
                </div>

                <% }); %>

<% } else { %>

		<div class="item active">
                    <div class="carousel-content">
                        <div style="text-align:left;">

        			<br>
        			<br>

					<div class="row">
						<div class="col-xs-2"></div>
						<div class="col-xs-6">
							<span style="font-size:14px;">
        							0 of 0 quirks
		        			    	</span>
						</div>
					</div>

					<br>

					<div class="row">
						<div class="col-xs-2"></div>
						<div class="col-xs-7">
			        			<b><u><span style="font-family: 'Times New Roman', Times, serif;font-size:21px;word-wrap:break-word;display:inline-block;">
        							no quirks found for &ldquo;<%= query %>&rdquo;
							</span></u></b>
						</div>
					</div>

                        </div>
                    </div>
                </div>
<% } %>

                
            </div>
        </div>
    </div>


<% if (tagsAll.length > 0) { %>

    <!-- Controls --> <a class="left carousel-control" href="#text-carousel" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
  </a>
 <a class="right carousel-control" href="#text-carousel" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
  </a>

<% } %>


</div>





<% if (tagsAll.length == 0) { %>
	<div class="row">
	<div class="col-md-12">
            <div class="well" style="background-color:#888888;">
			<form class="form-inline" method="POST" action="/search/add_tag">

		                <div class="row">

		                    <div class="col-xs-1"></div>

		                    <div class="col-xs-6" style="text-align:right;">
        				<input type="text" name="tag" placeholder=" create a new quirk?" maxlength="100" required="required" autofocus>
		                    </div>

		                    <div class="col-xs-1"></div>

                		    <div class="col-xs-4" style="text-align:left;">
					<button type="submit" class="btn btn-primary">
                		            <span style="font-size:11px;font-family:Helvetica;font-weight:bold;color:#e5e5e5;">CREATE <i class="fas fa-plus-circle"></i></span>
					</button>
                		    </div>

		                </div>

			</form>
	    </div>
	</div>
	</div>
<% } %>




		</div>
	</div>









<% include ../views/partials/footer %>